# 关于SDK的相关调研及思考

由于SDK的特殊性，所以对于SDK的开发来说，一开始对于SDK的一些通用的整体的元素的设计至关重要。因为SDK使用的应用有很多，一个及其细微的调整都会影响很多开发者的版本周期。因此前期的设计尤为重要。

我觉得SDK需要有以下三个大方面的考虑

1. 接口名称（见名知意）
2. 接口入参（尽量少，封装为实体类）
3. 接口出参（封装为实体类）：同步和异步的问题
4. 异常封装（不能让用户自己捕捉Exception）

### 设计原则

#### 接口名称、参数名称要足够清晰

一个准确描述功能的接口名称可以替代无数的注释

#### 单一职责原则

一个接口制作一件事，如果有两个比较接近的功能，但是用一个接口实现有点麻烦，那么就用两个接口，不要为了减少接口而生硬的把两个接口合为一个。

#### 接口参数尽可能少

接口调用的参数尽可能少，SDK能自身获取的就不要让开发者继续传递。尽量把传参封装到一个对象中。

#### 接口参数要校验

* 所有接口参数做合法性校验。
* 所有接口做的第一件事就是对参数做合法性校验。
* 对于需要转义、需要类型转换等的参数，一定要处理，而且尽量早的处理。

#### 通用的名称要统一

在系统中一定会有一些通用的名词，对于一些通用名词或者模块的叫法要统一、写法也要统一。

例如微信：Wx、wechat、weChat、wx、weixin有很多种叫法，那么一定要统一。


#### 同步与异步的问题

### 回调设计

* 必须有请求标识，让调用者知道它的源头是哪！

### 环境设计

1. 提供沙箱环境，不与现有测试环境融合的。
2. 根据所传信息不同，应该能够定义不同的返回码或者返回信息。

### 注意的问题

* 配置参数和接口入参分开

## 参考

* [https://blog.bihe0832.com/sdk_summary_future.html](https://blog.bihe0832.com/sdk_summary_future.html)